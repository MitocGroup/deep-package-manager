language: node_js
sudo: false
node_js:
  - '4.3'
  - '5.11'
  - '6.5'
cache:
  directories:
  - $(npm root -g)
  - node_modules
  - $(npm config get prefix)/bin
notifications:
  email:
  - devs-deep@mitocgroup.com
  slack:
    secure: CParjUyPwAK8/GB/OUmSjzfDFzls9F05h5+vxjpkvuFRmCpqbJKwEA4M9KRR+VK+H9nGJcUzTJBFLNTsADh8+hmKDt5vDsCxZ48hQ2zUIJfMIXVtpf/Hxs3K1HfLhN/YCkO14o1MMMkmXFqrbPI8YqmupdlXBVG3YQM1N0B37vnlsjhcEtJgql8FUx1T5CtFuNjRzA5SqYhx7/G1O/xtAYKkYfD/XGyoJBZngMfQ/FY/6fUlBztedC8n6RgcrzDi0phIWmT1u0naVgK8CI9ywa2/Cn0sozTfZQA0TshlDjM6aZdBqd5rxWZKm6faCzr36mmtr0eowHt6LuhGKR/RNx/Q9LDiCleOGOv6l+qbjIqUB4WVMMec7t6V0cENeWgUPYLhUZ7Z3/HKRO4jdbeSpMc8mpJ7BxW1kCWgtYqOP/yRRfXuBC5wxybFkI3Ljv63YVMCPmL8qHcidiLsa1adr4nBuBkrV/A67BUzonhdSVOuvS/sxVxy187xwHsQITBuf2gL+oRCzBg8K/dp6O0M3xkvGsXDoUa43B85kgOEJ9YoAqnuf0Q0iuDSgu4YaCnZHSoKF+dYmy+M5fQTXSzYm9Mk9rfAA/lES/2iWJcGOqUQlpoG3y7BhJhX8X0+zWPrIzPiECMMY38bnRsxr6rxY39Zih/X6mjoph3amyru1fs=
branches:
  only:
  - master
  - stage
  - test
  - dev
env:
  global:
  # Disable interactive user mode ###
  - DEEP_NO_INTERACTION=1
  # S3_BUCKET_NAME=[secured]
  - secure: qzTNAM9qEsa8mJ2tdCLvTGrLPiBwhIPWlyOX6BySkCUVDArXvhfDqJT7ZidZkPDf/AuZTPq6YHm0F/i5+8Vvq8UNLOGml/zlMOw2uWSlGH95bL+qgy9qYNTshIOf8rrZraBwBzJlY0rtS3xTtXnmaoVA5I++kYbLEvwrNzdMMqLR66isa1xmdDPp+Ufzh3dmdeyiiSxyZJcFWKX6pRAF1v5D71p3llbl+NnXTM1XU+wczCyRTcktBhV6qTdkUtuN1F5Va3y8iem4cSg3UNGGcy2OAksmx0ijKj6pLefNqpoRlNqK/MuJNwwjojLkmH4PpwJn5lMYrBz9aBR7tbNaoeoE2XgvZsCx/ubi4OrhKQJA0edBVOObtDnpLHffjOeX2j5TAWeq834sqBBH7PrDrsrmeiqsdvdYuv39zraEfEtKhk3F0O6K0hTJkZgcKTjcPWGHHWGKiUYHTrZZ32r7VhfMZjYii0A/3znQ7FqGamsh7f1sH1Ih5E4AJkjhboh/Mmq8uJgSxekdrZd5NSHeObp3m2jpSA1UQ/GawQluysArVp1LZcCYF/I/+u3MhP6+norHAr/aSAna81cDcvImyqo+gXEh0Ad49ApFqIa05Ga09QfjJ+VCshFlcvyN8WB8Y5QkAzYXVuHmILKv1JzxBe2E7zS7/hTqZuLMWJ8xLng=
  # AWS_DEFAULT_REGION=[secured]
  - secure: VkNaxAMdoVXwqD9Qd+74rlVrmDARDhjz2rjyKJzlglPHe8U2KA8G03IIHT8WbQXoxxFO81syVxTtsXfG9bP8EdX+4CmUsqb07UhONPYwTvitjhD0luSxifSom9Pq9VzZ/qwkAaBZbJKJ7R0NIJdpnfJ/J8f6gptxyp2q2iEWmPljZZpDCZBoaisMk2kmxNgLSVoZIZZ/EHKx7XANRjM6wXVjwdfbu1Wo1AWegKk3k7b+7lY+7CoCl34bV5lYtrWwcjcS6UFsuw00rpaVvk0x3oMLF3upg8prhaqh9DVtqAexVPXniMcs3Is2laVR5K/4dOjw+KDuAqNxSNymP14frYh+hJ0c6nBX/naAucyqjUY3QvtGBZ5OKE6lqqM7+B2h44+yDwdq6yUoOzICPf8Z/UUtP1EGccSawTK22dVpck1jn31v0QaBXWuqvmH+DKJklCyCxaodN/M7khEY3FqisFNCcg/9kEFl4En90H2oWft9LlXRpvW6uMFJCbBqn2oLQJ+rC08iG9jFKIfbItpJkv9VOT/ROIXOhFOazgQHPBd1pMX5OK3d2a8hgnq1DsJa6Lpk8XHqYts7x8usY4kOYNn2JANCskO0zW3BN1vkwVI2/Thx2Bm4WSB4Oya4YIeXtQEyoo78IwIUx5oGPpykWLXAzFV7GquCy9bFiWtPFw8=
  # GITHUB_OAUTH_TOKEN=[secured]
  - secure: UYjH+JdqzVkSVGnkaf1jg0LtABlDXtOIvi+Q1J2tNI2X86AjE0YeOfrG4TsiemAymuxaZE1Y3E4ghOZls6ro5nnsdSdDyCbIuLaiV1qIPTYDGTMZwhAqzLLlvARLruWv5P0GIFnFe4q01i/XKuDgBR+f8aSI/cXYtCTsg562P/kX43lpwK+Iec/+cOtv4SPif4qUFH4Q9cK4g49FpFFyotW9kL/AJHHpb4CC09ZKyWwrpZmKJDdyDBvprL6jSR/1YGCU4YAzfYBv2VBvuWpE8oRmqV4KfID7J4itDl26sY79U6ed79QvfVLdee6SEeyUw50HcbHBj26W1SAziFn/rkxNJJYqU4kWVHHxN4oSTtL1V4zDmkFgnu+bZGn5r8GUjfk0ty2Rp8H9GaB3CrDIUf3BdjNwoHWN+Ky6zimM5FMuHW5AIOs9Ul+VeGAN9TAsKofqAape16kwczxpyQp0G6uYQH5AifQmVzzg/oaVonAwsdyKDYdkzP0Ad9wr0QNBV8cTEM2e6+6tMLrbIn089GRbSj7Zhu8pSuzfTk1WMS5wBDesjPhGUQBTnk2gfulsXXUOWhIj+alx40tRLKJH9MILuO+uosRDvsHMTObADu7X19/CG08huJuARblPz/LIgiWglYvTLds5dC8XFiu0P7TBQy5yaEYxwIE369iOMPE=
  # AWS_ACCESS_KEY_ID=[secured]
  - secure: HqhOkkB1o0obtDsFlZkmSKuUzjnDcaUymXp9qNWPMnedTwxfZsQyO3stwOMm7+u+9sA9rpOxiNU25PVKb5RW/VHClCTfBAPZXD+e6iG0hP5A2VqyD1wg1gcR1wZzZkkVeoD8mH2DCxeskwPEiRsBGeTO2qvSIgFKR9W22xUQCpDFiE20pxGkbVBdPYL26qiosVHxQGVc/o0x/3a8hk8p1ouavIrJBT/05FM6c84aY9pF30ZZaj1/FyV+o8BzYZyggcZGZhGroDV2AYY/YpIbVPoCjebF0PVvX5+0VFmqyQKwXxE+7ajW2ivE91JSOU8zgHA+tjDFkezlIEPhf1lVxp3/DUJVPTUM0S+hg3KJaeVRitXQRchZCdmv+tu0jr47XEYxc3S4M3M2PEqLPes17Nzm/GzWasVHCnxgUGtfCZXlwxCmid+5ZoN/wYvdFMxB2PLQYAMbb8Q1H8OqNUQaXUwFLFEVwK686VT4Ozi8srnGtfJeYuQE/U2s5Ky8sy95iSgLkLNNe+kL2QqJGJ6WDoaUlMYhbS6CmEfG2b8w6fOlTWkUe1CjUivxmAEI3MpPQAlzALa0+hh7DxOPnWIk9UOvD78er+3NPd8h1umojqJAdkuLqcCbfpwL6kGB0kJRQrGYHoMWubVyZl6VCAHL5MvZ2SwLK/H094APPxFwXPg=
  # AWS_SECRET_ACCESS_KEY=[secured]
  - secure: QOeKYoy5ZVlaCYp97UnxyTVdcgYnmkhiG1tAvTJHc+TLOuvQz5QKXpULrAW8z40B1uvIWhAqu26P6K0x8M8XM/sKy9PblDXh9kq4sAALIS8o3QeV6E0OXltm2MUqQW2Phnmp694i+aUfF6glnQDGfS5qfx/Ho/24lzYtqkUj5E5tCQNUmBUmh2A7viu9A9yPQYoJhbtnMxYFKc8gywPbzUAnAqyVJXGphgKnMwsJuSTQ1Kxohj4KBycDZ2ory8B4OHkJLxq/GYG49Upb5QfPsqDGiGGhe3jcBvoLUwhi9IERu3Cyx/XWQLgVM7vKiDS/Q9oali8QW/yHMvIET87eVgoSAQs2nOUlkpMxN2dgyiq3iyHf4CdaJsMV68wOo5jZx4LjZlJKkKhUSXvV+yo3MV978vU8EbbnD4bcA/Wh8lxWDqarGSqusuPYGJikOd57z8+KCdNFDF+gJMw5M+scbx2dmidH5nQAElLPmTb7mHIUqQEGTuPFsKxUapmwinl55zK2jfJibH8cwE2olLz7uell74yp/OkR+ObKKJAvm8cyJygwlhb8wmbBmgYhF0fGJ3A2x1OJvzVHF56NKADC5pQAPVumUyJ70YSkT0M1g7rLY0yawwdBIhQlSviBm78Ol8rIUrz71Ejdz2xvGrNjFd0D54PdBF1BRKP9fWKqyQY=
  # CODECLIMATE_REPO_TOKEN_DEV=[secured]
  - secure: 05KsQ05dOOrKCb1b5M1gdwhSz4bCUeY+QGvIikMgt7JwstGwYITcLAH0JR5t4geFNdZKQ/crE0GfGHiF7a3aiGVEfda8P76iZutrIPqt43ugwc8uF4aXoTSC57n2m/lA2aBuWI/kV1a24qehkp8CNYojTgV2/BIhBlRVSIZBPmSzaGPMJ3oyFZqbsfJEXovtQeaklHC/dCLUpuNZ+s2ZrSKDzJLTeQ1uWlbctm7VMPA01m5Tp4EzCh7HCWnsyfhoyEcpM/oL9ubaP3uS6SOABm1ZjGmNFEXjCeXlt868oyaO3QpWRyEd/01ze7AXoldWZTBxw1pyDxhTGLZhUNEkgSbRzmdgIyJLv0I6dorQcuzXpUhv4JFL4gjVkzCiQAsc1OdHGJJDWI7dsv/uaptPPLMUlWwkaVyN2SEFZO8OjEuKVL72Mz2FhZtWFF6TQ5vCV7xZ4gQPVr9tfrGJP98wr3N9XfCkiFz+fqfrrydvWyi6iUpq9p90EYx51BcZSjd05VFHbCo7h6anvL5bMFDktZOC5ceDMjbXGxIpq5S9BXOSgdAczV3DkHrfsKDX3njkkuotI5n2qXNKA7nDom2vorc7xpaP2AjKpB3CvQO8ycKQ8Q8KlnqN3BSJqeg7lZYY9KlvhlwVEJqX4CkaX88w2tYl9iN0AUyg1rxZ9dZIViY=
  # CODECLIMATE_REPO_TOKEN_MASTER=[secured]
  - secure: YY2G/SsQPH3+5xGl9kmCSLMbNxB3vadodMSsG5CFZ4/0n/41nfgbmojpHfdQQmNfUy/yNHsNo75ElPyPoAOfQqxiSqzYeAPbwtx6LaZb9HgEqtX1Jja7t1khVtnyFJT0isDCme1gP9+vyrN+NQnrfkdOsu8JgnrkB0D5ppCeo5Lr2fnEWi3HVnlRk2Iud4A4zzAKq8tziuK/ADylmwYwVCZTUhY+TQEdK2slI3TTW4mkLTR6DCeAm4CvSdP7lY1OyArBKeqKVPxdbXt9IAMKkYe+AB2ONhFHnJTBZ56fmJ42/5OIw/kecPxZfEXMhXEPgIQH6ZozIDqYSiqZy6fTJDvfD1assnAzD5K4qaGhBHtQwmaSEjbnCfTug8enBr8mAbj1fACC43yQq/tB9tsRzqjymyZxIYLbiwHlW+ALIL65nM9bFkI8o5c3+0tCn+4ZodfsrffMuZrlEcld4mkH/LTZGjB+pZWjcAcqSknhTz1GY/JHGaAhjrDZw806XQNcK25PgpIM9u8u3pSrRwv9+kfcazbxd6pzXUbKXlHIoT9FbOr5jbGm+0FArhABjHdUZ6TXdyZxulw2q8s9gHEbttMoM5ypDNLaWBSk8wHqJzKV6na6p7hzBU6+qiv/MIvYUjFp/lWjheauRsnPJvuekgXNB9C/9/Pl0H79r76B40w=
before_install:
  - (npm list -g babel-cli --depth=0 || npm install -g babel-cli@6.x.x)
  - (npm list -g browserify --depth=0 || npm install -g browserify@11.2.x)
  - (npm list -g mocha@2.5.x --depth=0 || npm install -g mocha@2.5.x)
  - (npm list -g istanbul@^1.0.0-alpha --depth=0 || npm install -g istanbul@^1.0.0-alpha)
  - (npm list -g codeclimate-test-reporter --depth=0 || npm install -g codeclimate-test-reporter)
  - (if [ ! -d "node_modules/istanbul-combine" ]; then npm install istanbul-combine@0.3.x; fi)
  - (if [ ! -d "node_modules/fs-extra" ]; then npm install fs-extra@0.x.x; fi)
  - (if [ ! -d "node_modules/github" ]; then npm install github; fi)
  - (if [ ! -d "node_modules/aws-sdk" ]; then npm install aws-sdk; fi)
  - (if [ ! -d "node_modules/s3" ]; then npm install s3; fi)
  - cp test/package.json .
after_success:
  - npm run coverage
